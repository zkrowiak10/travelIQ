{% extends 'app/nav.html' %}
{%block title%} TraveIQ {% endblock %}

{% block content %}

<script>
    //all url endpoints below
    destinationsEndpoint = "{{url_for('ajax.destinations')}}"
</script>
{% if trips|length == 0 %}
<script>
    function formToggle(){
        $('#noTrips').toggle()
        $('#createTrips').toggle()
      
    }

    

    
</script>
<div class="container  ">
    <div class="row">
        <div class="col"></div>
        <div class="col-6 centered">
            <div id ="noTrips">
                <div class="headline">
                        <h1 class='centered-text'> You Have Not Created Any Trips Yet</h1>
                        <br>
                        
                </div>
                
                <p class='centered-text'>
                    <img src="{{url_for('static', filename='Assets/travel_search.png')}}" style="width: 400px">
                    <button type="button" onclick='formToggle()' class="btn btn-outline-primary headline">
                            Create Your First One Today
                    </button>
                </p>
            </div>

            <!-- form -->
            <form  method="post" style="display: none" id='createTrips' action="{{url_for('iq.create_trip')}}">
                <h1 >New Trip</h1> 
                <div class="form-group">
                  <label for="name">Trip Name</label>
                  <input class="form-control" required name="TName" aria-describedby="emailHelp" placeholder="eg. 'Trip to Italy'">

                </div>
                <div class="form-group">
                  <label for="StartDate">Trip Start Date</label>
                  <input type="date" required class="form-control" name="TStart">
                </div>
                <div class="form-group">
                        <label for="StartDate">Trip End Date</label>
                        <input type="date" required class="form-control" name="TEnd">
                </div>
                <div class="form-group">
                        <label for="Description">Description</label>
                        <textarea class="form-control" name="TDescription"></textarea>
                </div>
                <button type="submit" name="login" class="btn btn-primary">Create</button>
                <button type="button" onclick="formToggle()" class="btn btn-primary">Cancel</button>
            </form>

            
            
        </div >
        <div class="col"></div>
    </div>
</div>
{% else %}

  <div class="row h-100">
      <div class="col-3 sideBar border-right list-group">
        <a class="list-group-item" id="#primaryItem" data-bind="click: destinations.get" href="#">Destinations</a>
        <a class="list-group-item" data-bind="click: hotels.get" href="#">Hotels</a>
        <a class="list-group-item" data-bind="click: flights.get" href="#">Flights</a>
        <a class="list-group-item" data-bind="click: rentals.get" href="#">Rentals</a>
        <a class="list-group-item" data-bind="click: restaurants.get" href="#">Restaurants</a>
      </div>

      <div class="col-9" id="tabContent">
        <div class="contentArea" id="destinations">
            <h1>Destinations</h1>
            <br>
            <p>All other activities (hotels, restaurants, etc...) are linked to a destination so you can organize your trip easily</p>
            <br>
            <table class="table border">
                <thead>
                  <tr>
                    <th>Destination Name</th>
                    <th>Notes</th>
                    <th>
                    </th>
                    <th></th>
                  </tr>
                </thead>
                <tbody data-bind="foreach: destinations.destList">
                    <tr >
                        <td data-bind="text: name"></td>
                        <td data-bind="text: notes"></td>
                        <td ></td>
                        <!-- will add the following functions soon -->
                        <!-- data-bind="click: this.update()" -->
                        <!-- data-bind="click: this.delete()" -->
                        <td ><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-bind="click: modal" >
                            Edit
                          </button></td>

                    </tr>

                  </tbody>
            </table>
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title"  id="exampleModalLabel">Edit Destination</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <h5>Destination Name</h5>
                      <input type="text" data-bind="value: destinations.modal.name">
                      <br>
                      <h5>Notes</h5>
                      <input type="text" data-bind="value: destinations.modal.notes">
                      
                    </div>
                    <div class="modal-footer">
                      
                      <button type="button" id="dest-modal-close" class="btn btn-secondary" data-dismiss="modal">Close</button>

                      <button type="button" class="btn btn-primary"  data-bind="click: destinations.modal.save">Save changes</button>
                    </div>
                  </div>
                </div>
              </div>


        </div>
        <div class="contentArea" id="hotels">hot</div>
        <div class="contentArea" id="flights">fl</div>
        <div class="contentArea" id="rentals">rent</div>
        <div class="contentArea" id="restaurants">rest</div>
      </div>


        

{% endif %}

{% endblock %}